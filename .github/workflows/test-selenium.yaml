name: Test Management UI with Selenium
on:
  push:
    branches:
    - oidc-integration-github-action
jobs:
  make-test-runner-imager:
    runs-on: ubuntu-latest
    container: curlimages/curl
    services:
      rabbitmq:
        image: pivotalrabbitmq/rabbitmq:69a4159f3482e5212d364f499b2ca2e05bede0ca-otp-min
    steps:
    - uses: actions/checkout@v2
      with:
        options: --user root
    - name: reach rabbitmq
      run: |
          ls .
          curl -u guest:guest http://rabbitmq:15672/api/overview

####
# We need to run these as docker images:
#  UAA
#  RabbitMQ
#  Selenium Tests (maybe these ones could run in the host machine)
#  Selenium Hub (which runs the browser in silent mode)

# The workflow is more or less like this:
# job:build-rabbitmq-image  -> job:build-test-runner-image -> job:run-tests

# job:build-rabbitmq-image : Ideally, we do not want to push it. can we do that in github actions?
#
# job:run-tests : It runs within a container and it uses these services:
#  - rabbitmq
#  - UAA
#  - selenium-hub
# and it has this step which uses the image test-runner built by the job build-test-runner-image
